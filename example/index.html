<!DOCTYPE html>
<html>
<head>
  <title>CupJS</title>
  <script src="../dist/mobs.js"></script>
</head>
<body>
  <div id="app">
    {{title}} 
    {{description}}
    <controller name="main" template="main">
      <h1>{{name}}</h1>
    </controller>
  </div>
<script type="html/template" id="main">
  <p>{{name}}</p>
  <p click="{{hello}}">Every little thing she does is magic</p>
  <ul>
    <li repeat.each="{{names}}">{{this}}</li>
  </ul>
</script>  
<script>
  var utils = cupjs.constructor.utils
  cupjs.module("app",{
    initialize: function (router, userID, ctx) {
      
      ctx.title = "Hello, world!"
      
      ctx.description = utils.delay(1000).then(function () {
        return "Ta da!"
      })
      
      this.module('router')
    }
  }).controller('main', function (ctx) {
      console.log(ctx)
      ctx.name = "Hello"
      ctx.names = ["Rasmus", "Peter", 'Maria']
      
      ctx.hello = function () {
        alert('Hello')
      }
  })

  cupjs.service('router', function (config) {
    console.log('this is a coool router', config)
    this.config = config
  }, {config: 'yessir'})

  
  var app = cupjs.module('app')
  app.service('userID', 'det er det der t√¶ller')

  var router = cupjs._container.get('router', 'cupsjs')

  
  app.create({el:document.getElementById('app')}).then(function (app) {
    console.log('app',app)
  })

</script>
</body>
</html>