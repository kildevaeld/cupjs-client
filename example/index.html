<!DOCTYPE html>
<html>
<head>
  <title>CupJS</title>
  <script src="../dist/moby.js"></script>
  <script>
  var utils = moby.utils
  moby.module("app",{
    initialize: function (router, userID, ctx) {

      ctx.title = "Hello, world!"

      ctx.description = utils.delay(1000).then(function () {
        return "Ta da!"
      })

      this.module('router')
    },
    onClick: function (e, ctx) {
     
      ctx.title = "Hello, New World!"
    }
  }).controller('main', {
    constructor: function (ctx) {
      console.log(ctx)
      ctx.name = "Hello"
      ctx.names = ["Rasmus", "Peter", 'Maria']

      ctx.hello = function () {
        alert('Hello')
      }
    },
    onClick: function () {
      
    }
  })

  moby.service('router', function (config) {
    console.log('this is a coool router', config)
    this.config = config
  }, {config: 'yessir'})


  var app = moby.module('app')
  app.service('userID', 'det er det der t√¶ller')

  /*app.create({el:document.getElementById('app')}).then(function (app) {
    console.log('app',app)
  })*/

</script>
</head>
<body>
  <div moby-app="app">
    {{title}}
    {{description}}
    <button click="onClick">Click</button>
    <controller name="main" template="main">
      <h1>{{name}}</h1>
    </controller>
    <!--view template="main"></view-->
  </div>
<script type="html/template" id="main">
  <p>{{name}}</p>
  <!--p click="{{hello}}">Every little thing she does is magic</p-->
  <ul click.delegate="li" click.action="{{hello}}">
    <li repeat.each="{{names}}">{{this}}</li>
  </ul>
  <click delegate=".click" action="onClick">
    <div></div>
    <button class="click">click me</button>
  </click>
</script>

</body>
</html>
